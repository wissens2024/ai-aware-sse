services:
  postgres:
    image: postgres:16
    platform: "linux/amd64"   # 또는 "linux/arm64"로 변경 (본인 환경에 맞게)
    container_name: ai_aware_sse_postgres
    restart: unless-stopped
    environment:
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: change_me_superuser_pw
      POSTGRES_DB: postgres
      TZ: Asia/Seoul 
      POSTGRES_INITDB_ARGS: "--auth-host=scram-sha-256 --auth-local=scram-sha-256"
    ports:
      - "5432:5432"
    volumes:
      - ./pgdata:/var/lib/postgresql/data
      - ./initdb:/docker-entrypoint-initdb.d
    command:
      - "postgres"
      - "-c"
      - "max_connections=200"
      - "-c"
      - "shared_buffers=256MB"
      - "-c"
      - "log_min_duration_statement=500"
      - "-c"
      - "log_statement=none"